# ReportAbandono - Gerenciador de Denúncias

## Estrutura do Projeto

O projeto está organizado em duas pastas principais:
- `report-abandono/` - Front-end React + TypeScript + Vite
- `report-abandono-server/` - Back-end (não implementado ainda)

### Estrutura do Front-end (report-abandono)

```
report-abandono/
├── src/
│   ├── assets/
│   │   ├── logo.png          # Logo da aplicação (cachorro e gato)
│   │   └── main.png          # Ilustração principal (cachorro, gato e planta)
│   ├── components/
│   │   ├── ui/               # Componentes shadcn-ui
│   │   │   ├── button.tsx
│   │   │   ├── input.tsx
│   │   │   ├── textarea.tsx
│   │   │   ├── toggle-group.tsx
│   │   │   └── dropdown-menu.tsx
│   │   ├── Logo.tsx          # Componente do logo
│   │   ├── PetIllustration.tsx  # Componente da ilustração principal
│   │   ├── Header.tsx        # Header reutilizável (logo + título)
│   │   ├── NavigationHeader.tsx  # Header com navegação (logo + links + avatar)
│   │   ├── UserAvatar.tsx     # Avatar do usuário com dropdown menu
│   │   ├── LoginPage.tsx      # Tela de login
│   │   ├── RegisterPage.tsx  # Tela de cadastro (Comum/ONG)
│   │   ├── ForgotPasswordPage.tsx  # Tela de recuperação de senha
│   │   ├── HomePage.tsx       # Tela inicial (hero + como funciona)
│   │   ├── RegisterReportPage.tsx  # Tela de registro de denúncia
│   │   ├── ComplaintsListPage.tsx  # Tela de listagem de denúncias (usuário comum)
│   │   ├── ComplaintsManagementPage.tsx  # Tela de gerenciamento de denúncias (ONG)
│   │   └── NotFoundPage.tsx  # Tela de erro 404
│   ├── lib/
│   │   ├── utils.ts          # Utilitários (cn function)
│   │   └── toast-helpers.ts  # Helpers para toast notifications
│   ├── App.tsx               # Componente principal com rotas
│   ├── main.tsx              # Entry point
│   ├── index.css             # Estilos globais
│   └── vite-env.d.ts        # Declarações de tipos para imagens
├── index.html
└── package.json
```

## Design System

### Cores

- **Header Background**: `#A4CEBD` (verde claro)
- **Botão LOGAR**: `#85A191` (verde médio)
- **Botões Secundários**: `bg-gray-100` com hover `bg-gray-200`
- **Inputs**: `bg-gray-100` com `border-gray-300`
- **Background Principal**: `bg-gray-50`
- **Cards**: `bg-white` com `shadow-md`
- **Status Badges**: 
  - Encaminhada/Nova/Em análise: `bg-gray-200`
  - Negada/Reportada: `bg-gray-300`
  - Concluída: `bg-[#A4CEBD]`

### Tipografia

- **Fonte Principal**: Inter (Google Fonts)
- **Pesos Disponíveis**: 200 (Extra Light), 400, 500, 600, 700
- **Título "Gerenciador de Denúncias"**:
  - Peso: `font-extralight` (200)
  - Tamanho Responsivo:
    - Mobile: `text-2xl` (24px)
    - Small: `text-3xl` (30px)
    - Medium: `text-4xl` (36px)
    - Large: `text-5xl` (48px)
  - Opacidade: `opacity-75` (75%)
  - Cor: `text-gray-700`

### Componentes

#### Logo Component
- Localização: `src/components/Logo.tsx`
- Usa imagem: `src/assets/logo.png`
- Tamanho: `w-30 h-30` (classe customizada)
- Estilo: `object-contain`

#### PetIllustration Component
- Localização: `src/components/PetIllustration.tsx`
- Usa imagem: `src/assets/main.png`
- Estilo: Responsivo com `max-w-2xl max-h-2xl object-contain`

#### Header Component
- Localização: `src/components/Header.tsx`
- Header reutilizável com logo e título "ReportAbandono"
- Background: `#A4CEBD`
- Usado em: LoginPage, ForgotPasswordPage, NotFoundPage

#### NavigationHeader Component
- Localização: `src/components/NavigationHeader.tsx`
- Header com navegação completa
- Links: Início, Denúncias, Rastreio, Realizar denúncia
- Menu mobile com hamburger
- Avatar do usuário no canto direito (desktop)
- Usado em: HomePage, RegisterReportPage, ComplaintsListPage, ComplaintsManagementPage

#### UserAvatar Component
- Localização: `src/components/UserAvatar.tsx`
- Avatar circular com dropdown menu (shadcn-ui)
- Opções: Gerenciar perfil, Trocar senha, Apagar conta, Sair
- Integrado no NavigationHeader

#### ToggleGroup Component
- Localização: `src/components/ui/toggle-group.tsx`
- Componente customizado para seleção de opções
- Cores: Selecionado `#A4CEBD`, Não selecionado `bg-gray-200` com hover `bg-gray-300`
- Usado em: RegisterPage (Comum/ONG), RegisterReportPage (Pessoa/Animal)

## Rotas Configuradas

### App.tsx - Sistema de Rotas (react-router-dom)

- `/` - LoginPage
- `/register` - RegisterPage
- `/forgot-password` - ForgotPasswordPage
- `/home` - HomePage
- `/registrardenuncia` - RegisterReportPage
- `/denuncias` - ComplaintsListPage (usuário comum)
- `/gerenciamento-denuncias` - ComplaintsManagementPage (ONG)
- `*` - NotFoundPage (catch-all para rotas não encontradas)

## Responsividade

### Breakpoints Tailwind
- `sm`: 640px
- `md`: 768px
- `lg`: 1024px
- `xl`: 1280px

### Layout Responsivo

**Header:**
- Sem padding vertical (removido para reduzir altura)
- Padding horizontal: `px-6`
- Centralizado com `justify-center`
- `flex-wrap` para quebra em telas pequenas

**NavigationHeader:**
- Menu desktop: Links visíveis a partir de `md:`
- Menu mobile: Hamburger icon com dropdown a partir de `md:hidden`
- Avatar: Visível apenas em desktop (`hidden md:flex`)

**Main Content:**
- Mobile: Layout em coluna (`flex-col`)
- Desktop (lg+): Layout em linha (`lg:flex-row`)
- Ilustração: `min-h-[300px]` no mobile, removido no desktop

**Formulário:**
- Botões secundários: Coluna no mobile (`flex-col`), linha no sm+ (`sm:flex-row`)
- Padding responsivo: `p-6 md:p-8`

**Tabelas:**
- Scroll horizontal em telas pequenas (`overflow-x-auto`)
- Largura mínima: `min-w-[600px]`

## Padrões de Código

### Importações
- Usar alias `@/` para imports de `src/`
- Exemplo: `import { Button } from "@/components/ui/button"`
- Ícones: Importar de `lucide-react`

### Componentes
- Componentes funcionais com TypeScript
- Usar componentes shadcn-ui quando disponíveis
- Componentes UI ficam em `components/ui/`
- Componentes de página/feature ficam em `components/`
- Reutilizar componentes quando possível (Header, NavigationHeader, etc.)

### Estilos
- **SEMPRE usar classes Tailwind padrão**, evitar valores arbitrários quando possível
- Para cores específicas do design (#A4CEBD, #85A191), usar `style={{ backgroundColor: '#...' }}`
- Preferir classes Tailwind sobre estilos inline quando houver equivalente
- Usar `cn()` (de `lib/utils.ts`) para combinar classes condicionalmente

### Imagens
- Imagens ficam em `src/assets/`
- Importar usando: `import imageName from "@/assets/image.png"`
- Tipos declarados em `src/vite-env.d.ts`

### Validações
- Validação de email: Regex padrão
- Validação de CPF/CNPJ: Formatação automática e validação de formato
- Validação de CEP: Formatação automática
- Validação de telefone: Formatação automática
- Campos obrigatórios: Validar antes de submit

### Toast Notifications
- Usar `sonner` para toasts
- Helpers em `lib/toast-helpers.ts`
- Posição: `top-center`
- Tipos: success, error, info
- Toasts específicos para diferentes cenários (email inválido, email não cadastrado, etc.)

## Funcionalidades Implementadas

### Tela de Login (LoginPage)
- ✅ Layout completo conforme design do Figma
- ✅ Header com logo e título
- ✅ Seção de ilustração (esquerda)
- ✅ Formulário de login (direita)
- ✅ Campos: E-mail e Senha
- ✅ Botão principal "LOGAR"
- ✅ Botões secundários: "Registrar-se" (link para `/register`) e "Esqueceu a senha?" (link para `/forgot-password`)
- ✅ Responsividade completa
- ⚠️ **Sem funcionalidade ainda** - apenas visual

### Tela de Cadastro (RegisterPage)
- ✅ Toggle para selecionar tipo de usuário (Comum/ONG)
- ✅ Formulário dinâmico baseado no tipo selecionado
- ✅ Validações de campos (email, CPF/CNPJ, telefone, CEP, senha)
- ✅ Formatação automática de CPF, CNPJ, telefone e CEP
- ✅ Validação de confirmação de senha
- ✅ Botão de voltar para login (seta no canto superior esquerdo)
- ✅ Responsividade completa
- ⚠️ **Sem integração com backend** - apenas visual e validações

### Tela de Recuperação de Senha (ForgotPasswordPage)
- ✅ Layout conforme design do Figma
- ✅ Header reutilizado
- ✅ Ilustração reutilizada
- ✅ Campo de email com label "Digite o e-mail da sua conta:"
- ✅ Botão "Enviar"
- ✅ Botão de voltar para login (seta no canto superior esquerdo)
- ✅ Toast de sucesso (apenas após confirmação do servidor)
- ✅ Toast de erro para email inválido
- ✅ Toast de erro para email não cadastrado
- ✅ Responsividade completa
- ⚠️ **Sem integração com backend** - apenas visual e validações

### Tela Inicial (HomePage)
- ✅ NavigationHeader com links de navegação
- ✅ Seção Hero com título e botão "Realizar denúncia"
- ✅ Ilustração PetIllustration
- ✅ Seção "Como funciona" com 4 cards (Registre-se, Fotografe, Acompanhe, Compartilhe)
- ✅ Background verde claro (#A4CEBD) na seção "Como funciona"
- ✅ Responsividade completa

### Tela de Registro de Denúncia (RegisterReportPage)
- ✅ NavigationHeader
- ✅ Toggle para selecionar tipo de denúncia (Vi uma pessoa abandonando / Somente o animal)
- ✅ Textarea sempre visível com label e placeholder dinâmicos baseados na seleção
- ✅ Botão "Adicionar mídia" para upload de imagens e vídeos
- ✅ Validação de arquivos (tipo e tamanho)
- ✅ Seção de localização com botão "Inserir automaticamente"
- ✅ Geolocalização usando Geolocation API
- ✅ Reverse geocoding usando OpenStreetMap Nominatim API
- ✅ Campos de endereço preenchidos automaticamente (Logradouro, Número, Bairro, CEP)
- ✅ Campos editáveis após preenchimento automático
- ✅ Validações de todos os campos
- ✅ Botão de voltar (seta no canto superior esquerdo)
- ✅ Toasts para erros e sucesso
- ✅ Responsividade completa
- ⚠️ **Sem integração com backend** - apenas visual e validações

### Tela de Listagem de Denúncias - Usuário Comum (ComplaintsListPage)
- ✅ NavigationHeader
- ✅ Título "Lista de denúncias"
- ✅ Cards de resumo de status:
  - Encaminhadas (cinza claro, ícone ArrowRightLeft)
  - Em análise (cinza claro, ícone Clock)
  - Negadas (cinza escuro, ícone XCircle)
  - Concluídas (verde claro #A4CEBD, ícone CheckCircle)
- ✅ Contadores dinâmicos calculados dos dados
- ✅ Barra de busca com placeholder "Buscar por protocolo, status ou data"
- ✅ Busca em tempo real (filtra enquanto digita)
- ✅ Busca por protocolo, data, status e data de retorno
- ✅ Tabela com colunas: Protocolo, Data de inclusão, Status, Data do retorno, Feedback, Ações
- ✅ Status badges coloridos
- ✅ Link "Ver retorno" quando há feedback
- ✅ Ações: Compartilhar, Comentar, Excluir (ícones)
- ✅ Paginação (5 itens por página)
- ✅ Dados estáticos com estrutura pronta para backend
- ✅ Interface `Complaint` e tipo `ComplaintStatus` definidos
- ✅ Comentários TODO para integração com API
- ✅ Responsividade completa

### Tela de Gerenciamento de Denúncias - ONG (ComplaintsManagementPage)
- ✅ NavigationHeader
- ✅ Título "Gerenciamento de denúncias"
- ✅ Cards de resumo de status:
  - Novas (cinza claro, ícone Sun)
  - Em análise (cinza claro, ícone Clock)
  - Reportadas (cinza escuro, ícone Clock)
  - Concluídas (verde claro #A4CEBD, ícone CheckCircle)
- ✅ Contadores dinâmicos calculados dos dados
- ✅ Barra de busca com placeholder "Buscar por protocolo, status ou data"
- ✅ Busca em tempo real (filtra enquanto digita)
- ✅ Busca por protocolo, data, status e data de retorno
- ✅ Tabela com colunas: Protocolo, Data de inclusão, Status, Data do retorno, Feedback, Ações
- ✅ Status badges coloridos
- ✅ Feedback dinâmico baseado no status:
  - "Abrir" para status "Nova"
  - "Dar retorno" para status "Em análise"
  - "Ver retorno" para status "Concluída" (quando há feedback)
- ✅ Ações: Compartilhar, Comentar, Excluir (ícones)
- ✅ Paginação (5 itens por página)
- ✅ Dados estáticos com estrutura pronta para backend
- ✅ Interface `Complaint` e tipo `ComplaintStatus` específicos para ONG
- ✅ Comentários TODO para integração com API (`/api/complaints/ong`)
- ✅ Rota `/gerenciamento-denuncias` configurada
- ✅ Responsividade completa

### Tela de Erro 404 (NotFoundPage)
- ✅ Header reutilizado
- ✅ Ilustração PetIllustration reutilizada
- ✅ Mensagem "Erro 404!"
- ✅ Mensagem "Página não encontrada."
- ✅ Descrição "Esse endereço não existe no nosso sistema!"
- ✅ Botão "Página inicial" linkando para `/home`
- ✅ Responsividade completa

## Dependências Principais

- **react-router-dom**: Navegação e rotas
- **sonner**: Toast notifications
- **lucide-react**: Ícones
- **shadcn-ui**: Componentes UI (button, input, textarea, dropdown-menu)
- **tailwindcss**: Estilização
- **class-variance-authority**: Variantes de componentes
- **clsx** e **tailwind-merge**: Utilitários para classes CSS

## Decisões de Design

1. **Cores do Design**: Usar cores específicas do Figma (#A4CEBD, #85A191) via inline styles quando necessário
2. **Fonte Inter**: Carregada do Google Fonts com todos os pesos necessários
3. **Imagens**: Substituídas SVGs por imagens PNG da pasta assets
4. **Responsividade**: Mobile-first approach
5. **Header**: Sem padding vertical para manter altura reduzida
6. **Título**: Extra Light com opacidade 75% para visual mais suave
7. **Reutilização**: Componentes Header e NavigationHeader reutilizados em múltiplas telas
8. **Toast Notifications**: Posição centralizada no topo, cores ricas ativadas
9. **Geolocalização**: OpenStreetMap Nominatim para reverse geocoding (sem necessidade de API key)
10. **Diferenciação de Usuários**: Telas separadas para usuário comum e ONG, com rotas distintas

## Preparação para Backend

### Estruturas de Dados

#### Complaint (Usuário Comum)
```typescript
interface Complaint {
  id: string
  protocolo: string
  dataInclusao: string
  status: "encaminhada" | "em_analise" | "negada" | "concluida"
  dataRetorno: string | null
  feedback: string | null
}
```

#### Complaint (ONG)
```typescript
interface Complaint {
  id: string
  protocolo: string
  dataInclusao: string
  status: "nova" | "em_analise" | "reportada" | "concluida"
  dataRetorno: string | null
  feedback: string | null
}
```

### Endpoints Esperados (TODO)

- `GET /api/complaints` - Listar denúncias do usuário comum
- `GET /api/complaints/ong` - Listar denúncias para ONG
- `POST /api/complaints` - Criar nova denúncia
- `POST /api/auth/login` - Autenticação
- `POST /api/auth/register` - Registro
- `POST /api/auth/forgot-password` - Recuperação de senha
- `PUT /api/complaints/:id` - Atualizar denúncia
- `DELETE /api/complaints/:id` - Excluir denúncia

### Comentários TODO no Código

- Substituir dados estáticos por chamadas à API
- Implementar handlers de ações (compartilhar, comentar, excluir, feedback)
- Integrar autenticação e autorização
- Implementar lógica de redirecionamento baseada no tipo de usuário

## Próximos Passos (Não Implementados)

- Integração completa com backend
- Autenticação e autorização
- Lógica de redirecionamento baseada no tipo de usuário (Comum/ONG)
- Implementação real dos handlers de ações
- Upload de mídia para servidor
- Sistema de comentários
- Sistema de compartilhamento
- Visualização detalhada de denúncias
- Filtros avançados na listagem

## Comandos Úteis

```bash
# Desenvolvimento
cd report-abandono
npm run dev

# Build
npm run build

# Preview
npm run preview

# Adicionar componente shadcn-ui
npx shadcn@latest add [component-name]
```

## Notas Importantes

- O projeto usa Tailwind CSS v4 com Vite
- shadcn-ui configurado e funcionando
- TypeScript com strict mode ativado
- Path aliases configurados (`@/` aponta para `src/`)
- Suporte a importação de imagens configurado via `vite-env.d.ts`
- React Router DOM configurado com BrowserRouter
- Toast notifications configuradas com sonner
- Geolocalização usando APIs nativas do navegador
- OpenStreetMap Nominatim para reverse geocoding (sem API key necessária)
- Dados estáticos em todas as telas, prontos para substituição por chamadas à API
- Duas versões de listagem: uma para usuário comum (`/denuncias`) e outra para ONG (`/gerenciamento-denuncias`)
